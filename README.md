# Stampify

Project to automatically convert news / entertainment websites into STAMP
(Stories on AMP) pages.

This is an internship project for Summer 2020.

## Project Requirements:

- To get the project working, you will need to set the below mentioned API keys as environment 
variables:

    -  `GOOGLE_CLOUD_API_KEY` and the value as the base64 encoded string of the API key obtained from the console.

        Refer to this link for more information on creating and setting API keys:
        https://cloud.google.com/docs/authentication/api-keys
    
        To get the API key used for this project contact the owner of this repo.
    
    -  `FLASK_APP_SECRET_KEY` and the value could be any random generated string.

        Refer to this link for more information on the usage of flask secret key:
        https://flask.palletsprojects.com/en/1.1.x/quickstart/#sessions


- Run the following command to install all the dependencies:

    `$ pip install -r requirements.txt`

    **Note:** You need pip installed in your system for running above command . To install pip refer the link attached below:

    https://pip.pypa.io/en/stable/installing/

- Run the below commands after installing the dependencies

    - Run this command in terminal:
    
        `$ python3 -m spacy download en_core_web_sm`
  
    - Run these commands in the python shell:

        `>>> import nltk`
    
        `>>> nltk.download('punkt')`

## How to run the project:

This project can be run in two ways:

- **Using Command Line Interface**
  
  **Input**: 
  
  `url:` Url of the website to be stampified.
  
  `page_count:` Maximum number of stamp pages to generate.
  
  **Output**:
  
  Generated stamp amp-html will be printed on the console.
  
  **Command to run the project:**
  
  `$ python3 main.py 'url' page_count(optional)`
  
  Example:
  
    `$ python3 main.py 'https://www.scoopwhoop.com/entertainment/memes-from-dd-ramayan/' 5`
    
    `$ python3 main.py 'https://www.scoopwhoop.com/entertainment/memes-from-dd-ramayan/'`
  
  **For more help, Use command:** `python3 main.py -h`
  
  **Note:** You must be in root directory of project (`stampify/`) to run above commands.

- **Using Flask server**

    Navigate to `stampify/api/` directory and run the following command to start the server:
    
    `$ python server.py`
    
    The server will be hosted at http://127.0.0.1:5000/

    **API Endpoints:**

    - GET `/` to see home page for STAMPIFY
    
    - POST `/submit` to provide the details required for stampification.
    
      **Request body** = {'**website_url**': url, '**max_pages**': number_of_pages}
    
    - GET `/result` to see the output options available.
    - GET `/generated_stamp` to show the preview of generated stamp page.
    
      **Note:** Stamp must be generated by passing stampification details first on `/submit`
      to see generated stamp at this endpoint.
